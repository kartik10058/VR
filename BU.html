<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Workshop — Interactive Scene</title>
    <meta name="description" content="A-Frame VR Workshop Demo — Meta Quest 3s">
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>

      <!-- Assets -->
      <a-assets>
        <img id="wood" src="https://cdn.aframe.io/a-painter/images/wood.jpg">
        <img id="floor" src="https://cdn.aframe.io/a-painter/images/floor.jpg">
        <img id="city-sky" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg">
      </a-assets>

      <!-- Camera + Controls (Desktop & VR) -->
      <a-entity id="rig">
        <a-entity camera position="0 1.6 0" look-controls wasd-controls>
          <!-- Desktop mouse cursor -->
          <a-cursor
            color="#FFFFFF"
            fuse="false"
            raycaster="objects: .clickable; far: 20">
          </a-cursor>
        </a-entity>

        <!-- VR Controllers -->
        <a-entity
          id="leftController"
          meta-touch-controls="hand: left"
          laser-controls="hand: left"
          raycaster="objects: .clickable; far: 20"
          line="color: cyan">
        </a-entity>
        <a-entity
          id="rightController"
          meta-touch-controls="hand: right"
          laser-controls="hand: right"
          raycaster="objects: .clickable; far: 20"
          line="color: magenta">
        </a-entity>
      </a-entity>

      <!-- Lights -->
      <a-light type="ambient" color="#BBB" intensity="0.5"></a-light>
      <a-light type="directional" color="#FFF" intensity="0.8" position="-1 2 1"></a-light>

      <!-- Scene Objects -->
       <a-image src="https://raw.githubusercontent.com/alluringxstalwart/SourceYISL/main/Landscape.png" position="0 5 -10"
      width="25" height="7.5"></a-image>
    
    <a-text value="Young Innovators STEM Lab" position="0 9.5 -10" align="center" color="white" font="mozillavr"
      width="10" height="5" anchor="center">
    </a-text>
      <a-box
        position="-2 0.5 -3"
        rotation="0 45 0"
        src="#wood"
        class="clickable"
        animation="property: rotation; to: 0 405 0; loop: true; dur: 5000">
      </a-box>

      <a-sphere
        position="0 1.25 -5"
        radius="1.25"
        color="#EF2D5E"
        class="clickable"
        animation="property: position; to: 0 2.5 -5; dir: alternate; loop: true; dur: 1500">
      </a-sphere>

      <a-cylinder
        position="2 0.75 -3"
        radius="0.5"
        height="1.5"
        color="#FFC65D"
        class="clickable"
        animation="property: scale; to: 1.3 1.3 1.3; dir: alternate; loop: true; dur: 800">
      </a-cylinder>

      <!-- Environment -->
      <a-plane
        position="0 0 -4"
        rotation="-90 0 0"
        width="20"
        height="20"
        src="#floor">
      </a-plane>

      <a-sky src="#city-sky"></a-sky>

      <!-- UI Text -->
      <a-text
        value="Welcome to VR Workshop!"
        position="0 3.5 -5"
        align="center"
        color="#FFFFFF"
        width="8">
      </a-text>

      <a-text
        value="Click objects to change color! (WASD to move, Mouse to look)"
        position="0 0.5 -2"
        align="center"
        color="#AAAAAA"
        width="5">
      </a-text>

      <!-- Interaction Script -->
      <script>
        AFRAME.registerComponent('click-change-color', {
          init: function () {
            this.el.addEventListener('click', function () {
              var randomColor = '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');
              // Remove any texture so the color is visible (fixes the box)
              this.removeAttribute('src');
              this.setAttribute('material', 'src', '');
              this.setAttribute('color', randomColor);
            });
          }
        });

        document.addEventListener('DOMContentLoaded', function () {
          document.querySelectorAll('.clickable').forEach(function (obj) {
            obj.setAttribute('click-change-color', '');
          });
        });
      </script>

    </a-scene>
  </body>
</html>
